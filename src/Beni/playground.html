<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="allFunctions.js"></script>
    <script src="playground.js"></script>

</head>
<body>
<div id="label1"></div>
<div id="label2"></div>

<p id="text">Test Element</p>

<input type="text" id="inputTextElement">

<p id="joke1" style="background-color: #ff7329"></p>
<p id="joke2" style="background-color: aquamarine"></p>
<script>
    const testUrl = "https://api.chucknorris.io/jokes/random";


    const xhrAsync = new XMLHttpRequest()
    xhrAsync.open("GET", "https://api.chucknorris.io/jokes/random");
    xhrAsync.send();
    xhrAsync.onload = e => {
        console.log(e)
        if (xhrAsync.readyState === XMLHttpRequest.DONE && xhrAsync.status === 200) {
            document.getElementById("joke2").textContent = JSON.parse(xhrAsync.responseText).value;
        }
    }

    const xhrSynchron = new XMLHttpRequest()
    xhrSynchron.open("GET", "https://api.chucknorris.io/jokes/random", false);
    xhrSynchron.send()
    console.log(xhrSynchron.response)
    console.log(xhrSynchron.responseText)
    console.log(xhrSynchron.responseType)
    console.log(xhrSynchron.responseURL)
    console.log(xhrSynchron.responseXML)
    document.getElementById("joke1").textContent = JSON.parse(xhrSynchron.response).value;

    const jokeUrl = "https://api.chucknorris.io/jokes/random";

    const HttpGet = url => callback => {
        const xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = () =>
            (xmlHttp.readyState === XMLHttpRequest.DONE && xmlHttp.status === 200)
                ? callback(xmlHttp.responseText)
                : new Error("Statuscode is: " + xmlHttp.status.toString())

        xmlHttp.open("GET", url, true); // true for asynchronous
        xmlHttp.send();
    }
    // Beispiel mit HttpGet
    // HttpGet(jokeUrl)(true)(x => document.getElementById("joke").innerText = JSON.parse(x).value)

    // Beispiel anwendung mit HttpGet und Box
    // HttpGet(jokeUrl)(true)(resp => Box(resp)(mapf)(JSON.parse)(fold)(x => document.getElementById("joke").innerText = x.value))



    const HttpGetSync = theUrl => {
        const xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
        xmlHttp.send( );
        return xmlHttp.responseText;
    }


</script>
</body>
</html>
